# 校园跑腿送-数据库说明
<font class="bg-color-2" style="background-color:#e91e63">***文档说明：数据类型通过表图展示，主键、外键、属性等通过文字说明,并附上sql语句***</font>
## user
用户

![](https://markdown.liuchengtu.com/work/uploads/upload_e8c320526f66647124d1a92399e56fcf.png)

主键：uId  
emai设置为unique  
其余属性：tel：用户联系方式（电话） cardId：一卡通号    password：登录密码  

create table user  
(  
    uId      varchar(255) not null  
        primary key,  
    tel      varchar(20)  null,  
    cardId   varchar(20)  null,  
    email    varchar(255) null,  
    password varchar(255) null,  
    constraint email  
        unique (email)  
);

## store
商店个体

![](https://markdown.liuchengtu.com/work/uploads/upload_16014b38cdcb700d664f69acbeedf45d.png)

主键：sId  
外键：uId->user(uId)  
其余属性：sname：商店名称 logo：商店标志 description：描述（简介） 
create table store  
(  
    sId         varchar(255) not null  
        primary key,  
    uId         varchar(255) null,  
    sname       varchar(255) null,  
    logo        varchar(255) null,  
    description text         null,  
    constraint store___fk  
        foreign key (uId) references user (uId)  
);

## item
表示商店中一个一个的外卖商品个体

![](https://markdown.liuchengtu.com/work/uploads/upload_7f80d0735f6d71a5a2a7ca7f932dbd4c.png)

主键：iId  
外键：sId->store(sId)  
其余属性：photo：商品照片 description：商品描述 price：商品价格 amount：商品库存

create table item  
(  
    iId         varchar(255) not null  
        primary key,  
    sId         varchar(255) null,  
    photo       varchar(255) null,  
    description text         null,  
    price       double       null,  
    amount      int          null,  
    constraint item___fk  
        foreign key (sId) references store (sId)  
);

## record
订单记录

![](https://markdown.liuchengtu.com/work/uploads/upload_a0e406f64e028e0a4771e47c160f7b1d.png)


主键：recordId  
外键：uId->user(uId) 这里的user是点单的用户 sId->store(sId) iId->item(iId) riderId->user(Id) 这里的user是拥有骑手身份的用户  
其余属性：price：本次订单总价 status：骑手是否接单，可以用0代表已下单，1代表骑手已接单，2代表已送达，3代表已取餐（订单完成）

create table record  
(  
    recordId varchar(255) not null  
        primary key,  
    uId      varchar(255) null,  
    sId      varchar(255) null,  
    iId      varchar(255) null,  
    price    double       null,  
    riderId  varchar(255) null,  
    status   tinyint  null,  
    constraint record___fk  
        foreign key (uId) references user (uId),  
    constraint record___fk_2  
        foreign key (sId) references store (sId),  
    constraint record___fk_3  
        foreign key (iId) references item (iId),  
    constraint record___fk_4  
        foreign key (riderId) references user (uId)  
);

## itemcart
购物车

![](https://markdown.liuchengtu.com/work/uploads/upload_4c9994419c89933df6528ac3281ffe4a.png)

主键：itemcartId  
外键：uId->user(uId) iId->item(iId)  

create table itemcart  
(  
    itemcartId int          not null  
        primary key,  
    uId        varchar(255) not null,  
    iId        varchar(255) null,  
    constraint itemcart___fk  
        foreign key (uId) references user (uId),  
    constraint itemcart___fk_2  
        foreign key (iId) references item (iId)  
);

## cstore
申请成为商家

![](https://markdown.liuchengtu.com/work/uploads/upload_7593ab59978e803c58fa0a2961ff2a68.png)



主键：cstoreId  
外键：uId->user(uId)  
其余属性：tel：联系方式（电话） cardId：一卡通号 sname：商店名称 license：许可证 status：状态，可以用0代表已申请，1代表已通过，2代表申请未通过

create table cstore  
(  
    cstoreId int          not null  
        primary key,  
    uId      varchar(255) null,  
    tel      varchar(20)  null,  
    cardId   varchar(255) null,  
    sname    varchar(255) null,  
    license  varchar(255) null,  
    status   tinyint   null,  
    constraint cstore_pk  
        unique (uId),  
    constraint cstore___fk  
        foreign key (uId) references user (uId)  
);

## crider
申请成为骑手

![](https://markdown.liuchengtu.com/work/uploads/upload_1e5a01b1c5a9b2580934b4e85834b3c3.png)


主键：criderId  
外键：uId->user(uId)  
其余属性：tel：联系方式（电话） cardId：一卡通号 name：骑手姓名 status：状态，可以用0代表已申请，1代表已通过，2代表申请未通过

create table crider  
(  
    criderId int          not null  
        primary key,  
    uId      varchar(255) null,  
    tel      varchar(20)  null,  
    cardId   varchar(255) null,  
    name     varchar(255) null,  
    status   tinyint   null,  
    constraint crider_pk  
        unique (uId),  
    constraint crider___fk  
        foreign key (uId) references user (uId)  
);

## comment

评价

![](https://markdown.liuchengtu.com/work/uploads/upload_dd6ca04f8bd38ce11ea502a0982a190e.png)


主键：commentId  
外键：uId->user(uId) sId->store(sId) recordId->record(recordId)  
其余属性：comment：评价 recomment：追评（回复评论）

create table comment  
(  
    commentId int          not null  
        primary key,  
    uId       varchar(255) null,  
    sId       varchar(255) null,  
    comment   text         null,  
    recomment text         null,  
    recordId  varchar(255) null,  
    constraint comment___fk  
        foreign key (uId) references user (uId),  
    constraint comment___fk_2  
        foreign key (sId) references store (sId),  
    constraint comment___fk_3  
        foreign key (recordId) references record (recordId)  
);

## 表图
![](https://markdown.liuchengtu.com/work/uploads/upload_470aa4dcbd1fd633a21099cea631513f.png)
